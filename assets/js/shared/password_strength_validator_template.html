<!-- 
    EducAid Password Strength Validator - HTML Template
    
    This template shows the required HTML structure for the password
    strength validator to work properly.
    
    REQUIREMENTS:
    - Bootstrap 5 CSS (for styling)
    - Bootstrap Icons (for icons)
    - password_strength_validator.js
-->

<!-- ===== OPTION 1: FULL PASSWORD FORM WITH CONFIRMATION ===== -->
<div class="password-section">
    <!-- Password Input -->
    <div class="mb-3">
        <label class="form-label" for="password">Password <span class="text-danger">*</span></label>
        <div class="input-group">
            <input 
                type="password" 
                class="form-control" 
                name="password" 
                id="password" 
                minlength="12" 
                required 
                placeholder="Enter password"
            />
            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('password', 'passwordIcon')">
                <i class="bi bi-eye" id="passwordIcon"></i>
            </button>
        </div>
        <div class="form-text mb-2">
            Must be at least 12 characters with uppercase, lowercase, numbers, and special characters.
        </div>
    </div>
    
    <!-- Password Strength Indicator -->
    <div class="mb-3">
        <label class="form-label">Password Strength</label>
        <div class="progress" style="height: 25px;">
            <div 
                id="strengthBar" 
                class="progress-bar" 
                role="progressbar" 
                style="width: 0%; transition: width 0.3s ease, background-color 0.3s ease;" 
                aria-valuenow="0" 
                aria-valuemin="0" 
                aria-valuemax="100"
            ></div>
        </div>
        <small id="strengthText" class="text-muted d-block mt-1"></small>
    </div>
    
    <!-- Confirm Password Input -->
    <div class="mb-3">
        <label class="form-label" for="confirmPassword">Confirm Password <span class="text-danger">*</span></label>
        <div class="input-group">
            <input 
                type="password" 
                class="form-control" 
                name="confirm_password" 
                id="confirmPassword" 
                minlength="12" 
                required 
                placeholder="Re-enter password"
            />
            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('confirmPassword', 'confirmPasswordIcon')">
                <i class="bi bi-eye" id="confirmPasswordIcon"></i>
            </button>
        </div>
        <small id="passwordMatchText" class="d-block mt-1"></small>
    </div>
</div>

<!-- ===== OPTION 2: SINGLE PASSWORD (NO CONFIRMATION) ===== -->
<div class="password-section-no-confirm">
    <!-- Password Input -->
    <div class="mb-3">
        <label class="form-label" for="newPassword">New Password <span class="text-danger">*</span></label>
        <div class="input-group">
            <input 
                type="password" 
                class="form-control" 
                name="new_password" 
                id="newPassword" 
                minlength="12" 
                required 
                placeholder="Enter new password"
            />
            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('newPassword', 'newPasswordIcon')">
                <i class="bi bi-eye" id="newPasswordIcon"></i>
            </button>
        </div>
    </div>
    
    <!-- Password Strength Indicator -->
    <div class="mb-3">
        <label class="form-label">Password Strength</label>
        <div class="progress" style="height: 25px;">
            <div 
                id="newPasswordStrengthBar" 
                class="progress-bar" 
                role="progressbar" 
                style="width: 0%; transition: width 0.3s ease, background-color 0.3s ease;" 
                aria-valuenow="0" 
                aria-valuemin="0" 
                aria-valuemax="100"
            ></div>
        </div>
        <small id="newPasswordStrengthText" class="text-muted d-block mt-1"></small>
    </div>
</div>

<!-- ===== REQUIRED JAVASCRIPT ===== -->
<script>
// Toggle password visibility function
function togglePasswordVisibility(inputId, iconId) {
    const input = document.getElementById(inputId);
    const icon = document.getElementById(iconId);
    
    if (input && icon) {
        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.remove('bi-eye');
            icon.classList.add('bi-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.remove('bi-eye-slash');
            icon.classList.add('bi-eye');
        }
    }
}

// USAGE EXAMPLE 1: Auto-initialization (default IDs)
// If you use the default IDs (password, confirmPassword, strengthBar, etc.),
// the validator will auto-initialize on page load. No code needed!

// USAGE EXAMPLE 2: Manual initialization with default settings
// setupPasswordValidation();

// USAGE EXAMPLE 3: Custom configuration
// setupPasswordValidation({
//     passwordInputId: 'newPassword',
//     strengthBarId: 'newPasswordStrengthBar',
//     strengthTextId: 'newPasswordStrengthText',
//     requireMatch: false,
//     minStrength: 70
// });

// USAGE EXAMPLE 4: With submit button control
// setupPasswordValidation({
//     submitButtonSelector: 'button[type="submit"]',
//     onValidationChange: (state) => {
//         console.log('Validation state:', state);
//     }
// });

// USAGE EXAMPLE 5: Programmatic control
// const validator = setupPasswordValidation({
//     passwordInputId: 'newPassword',
//     strengthBarId: 'newPasswordStrengthBar',
//     strengthTextId: 'newPasswordStrengthText',
//     requireMatch: false
// });
// 
// // Check if valid
// if (validator.validate()) {
//     console.log('Password is strong!');
// }
// 
// // Get strength score
// const { strength, feedback } = validator.getStrength();
// console.log(`Strength: ${strength}/100`);
// 
// // Reset fields
// validator.reset();
</script>

<!-- ===== PASSWORD REQUIREMENTS SUMMARY (Optional) ===== -->
<div class="alert alert-info">
    <h6 class="alert-heading"><i class="bi bi-shield-check me-2"></i>Password Requirements</h6>
    <ul class="mb-0">
        <li>At least <strong>12 characters</strong> long</li>
        <li>At least one <strong>uppercase letter</strong> (A-Z)</li>
        <li>At least one <strong>lowercase letter</strong> (a-z)</li>
        <li>At least one <strong>number</strong> (0-9)</li>
        <li>At least one <strong>special character</strong> (!@#$%^&*...)</li>
    </ul>
</div>
